# nuqasm2
New qasm2 translator : qasm2 to Python dict form AST

Based on [Open Quantum Assembly Language](https://arxiv.org/pdf/1707.03429.pdf)

Translates QASM2 source into a Python dictionary with 4 keys:
* `t_sect`
  * Filepaths
  * Datetimes
  * Name of unit
* `c_sect`
  * Ops
  * Declarations
  * Comments
* `g_sect`
  * User gate definitions (e.g., `qelib1.inc`)
* `s_sect`
  * Saved source
  
There are many options controlling what gets generated.

Output can include
* Source file path
* Line number
* Original source
* Element type
* Parameter values
* Other appropriate translation elements

`nuqasm2.py` is a driver.
* The class file is `qasmast.py`.
* `qasmast` is the code body providing methods to perform translation from OPENQASM source to data structures useful for backend circuit construction

*Note* that any qasm source file which does `include "qelib1.inc";` will need `qelib.inc` either to be in the current directory, or in a directory mentioned to the ` -i --include_path` directive.

This is a proof of concept intended to illustrate more than to prescribe. Issues welcome, including comments and suggestions. There is a [detailed explanation of the Abstract Syntax Tree (AST) output](https://github.com/jwoehr/nuqasm2/blob/master/doc/nuqasm_ast.md) in the `doc/` directory

```
$ python nuqasm2.py -h
usage: nuqasm2.py [-h] [-n NAME] [-o OUTFILE] [-p] [-i INCLUDE_PATH]
                  [--perf_filepath PERF_FILEPATH] [-t] [-u] [-v]
                  [--save_pgm_source] [--save_element_source]
                  [--save_gate_source] [--save_source] [--show_gate_decls]
                  [--sortby SORTBY]
                  [filepaths [filepaths ...]]

Implements qasm2 translation to python data structures. Working from _Open
Quantum Assembly Language_ https://arxiv.org/pdf/1707.03429.pdf ......
Copyright 2019 Jack Woehr jwoehr@softwoehr.com PO Box 51, Golden, CO
80402-0051. Apache-2.0 license -- See LICENSE which you should have received
with this code. Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See
the License for the specific language governing permissions and limitations
under the License.

positional arguments:
  filepaths             Filepath to 1 or more .qasm file(s) (default stdin)

optional arguments:
  -h, --help            show this help message and exit
  -n NAME, --name NAME  Give a name to the translation unit (default 'main'
  -o OUTFILE, --outfile OUTFILE
                        Write AST to outfile overwriting silently, default is
                        stdout
  -p, --profile         Profile translator run, writing to stderr and also to
                        file if --perf_filepath switch is also used
  -i INCLUDE_PATH, --include_path INCLUDE_PATH
                        Search path for includes, paths separated by ':',
                        default include path is '.'
  --perf_filepath PERF_FILEPATH
                        Save -p --profile data to provided filename
  -t, --timeit          Time translator run (1 iteration) (gc enabled)
  -u, --unknown         exit with error on unknown element in source
  -v, --verbose         Increase verbosity each -v up to 3
  --save_pgm_source     Save program source in output
  --save_element_source
                        Save element source in output
  --save_gate_source    Save gate source in output
  --save_source         Save all source regions of output (equivalent to
                        --save_pgm_source --save_element_source
                        --save_gate_source)
  --show_gate_decls     Show gate declarations in code section output
  --sortby SORTBY       Sort sequence for performance data if -p switch used
                        ... one or more of the following separated by spaces
                        in a single string on the command line, e.g., --sortby
                        "calls cumtime file" : 'calls' == call count 'cumtime'
                        == cumulative time 'file' == file name 'module' ==
                        file name 'ncalls' == call count 'pcalls' == primitive
                        call count 'line' == line number 'name' == function
                        name 'nfl' == name/file/line 'stdname' == standard
                        name 'time' == internal time 'tottime' == internal
                        time ... default is cumtime

$ cat yiqing.qasm
// yiqing (one of many possible)
OPENQASM 2.0;
include "qelib1.inc";
qreg q[3];
creg c[3];
h q[0];
h q[1];
h q[2];
barrier q[0],q[1],q[2];
measure q[0] -> c[0];
measure q[1] -> c[1];
measure q[2] -> c[2];
$ python nuqasm2.py -i "${HOME}/work/QISKit/qiskit-terra/qiskit/qasm/libs" --save_source yiqing.qasm 
{   'c_sect': [   {   'filenum': 0,
                      'linenum': 0,
                      'source': '// yiqing (one of many possible)',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 0,
                      'linenum': 1,
                      'source': 'OPENQASM 2.0;',
                      'type': <ASTType.DECLARATION_QASM_2_0: 2000>},
                  {   'filenum': 0,
                      'include': 'qelib1.inc',
                      'linenum': 2,
                      'source': 'include "qelib1.inc";',
                      'type': <ASTType.INCLUDE: 3000>},
                  {   'filenum': 1,
                      'linenum': 0,
                      'source': '// Quantum Experience (QE) Standard Header',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 1,
                      'source': '// file: qelib1.inc',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 3,
                      'source': '// --- QE Hardware primitives ---',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 5,
                      'source': '// 3-parameter 2-pulse single qubit gate',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 7,
                      'source': '// 2-parameter 1-pulse single qubit gate',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 9,
                      'source': '// 1-parameter 0-pulse single qubit gate',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 11,
                      'source': '// controlled-NOT',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 13,
                      'source': '// idle gate (identity)',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 15,
                      'source': '// idle gate (identity) with length '
                                'gamma*sqglen',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 18,
                      'source': '// --- QE Standard Gates ---',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 20,
                      'source': '// Pauli gate: bit-flip',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 22,
                      'source': '// Pauli gate: bit and phase flip',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 24,
                      'source': '// Pauli gate: phase flip',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 26,
                      'source': '// Clifford gate: Hadamard',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 28,
                      'source': '// Clifford gate: sqrt(Z) phase gate',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 30,
                      'source': '// Clifford gate: conjugate of sqrt(Z)',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 32,
                      'source': '// C3 gate: sqrt(S) phase gate',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 34,
                      'source': '// C3 gate: conjugate of sqrt(S)',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 37,
                      'source': '// --- Standard rotations ---',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 38,
                      'source': '// Rotation around X-axis',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 40,
                      'source': '// rotation around Y-axis',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 42,
                      'source': '// rotation around Z axis',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 45,
                      'source': '// --- QE Standard User-Defined Gates  ---',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 47,
                      'source': '// controlled-Phase',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 49,
                      'source': '// controlled-Y',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 51,
                      'source': '// swap',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 53,
                      'source': '// controlled-H',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 61,
                      'source': '// C3 gate: Toffoli',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 72,
                      'source': '// cswap (Fredkin)',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 79,
                      'source': '// controlled rz rotation',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 87,
                      'source': '// controlled phase rotation',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 96,
                      'source': '// controlled-U',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 1,
                      'linenum': 106,
                      'source': '// two-qubit ZZ rotation',
                      'type': <ASTType.COMMENT: 100>},
                  {   'filenum': 0,
                      'linenum': 3,
                      'qreg_name': 'q',
                      'qreg_num': '3',
                      'source': 'qreg q[3];',
                      'type': <ASTType.QREG: 20>},
                  {   'creg_name': 'c',
                      'creg_num': '3',
                      'filenum': 0,
                      'linenum': 4,
                      'source': 'creg c[3];',
                      'type': <ASTType.CREG: 30>},
                  {   'filenum': 0,
                      'linenum': 5,
                      'op': 'h',
                      'param_list': None,
                      'reg_list': ['q[0]'],
                      'source': 'h q[0];',
                      'type': <ASTType.OP: 70>},
                  {   'filenum': 0,
                      'linenum': 6,
                      'op': 'h',
                      'param_list': None,
                      'reg_list': ['q[1]'],
                      'source': 'h q[1];',
                      'type': <ASTType.OP: 70>},
                  {   'filenum': 0,
                      'linenum': 7,
                      'op': 'h',
                      'param_list': None,
                      'reg_list': ['q[2]'],
                      'source': 'h q[2];',
                      'type': <ASTType.OP: 70>},
                  {   'filenum': 0,
                      'linenum': 8,
                      'reg_list': ['q[0]', 'q[1]', 'q[2]'],
                      'source': 'barrier q[0],q[1],q[2];',
                      'type': <ASTType.BARRIER: 50>},
                  {   'filenum': 0,
                      'linenum': 9,
                      'source': 'measure q[0] -> c[0];',
                      'source_reg': 'q[0]',
                      'target_reg': 'c[0]',
                      'type': <ASTType.MEASURE: 40>},
                  {   'filenum': 0,
                      'linenum': 10,
                      'source': 'measure q[1] -> c[1];',
                      'source_reg': 'q[1]',
                      'target_reg': 'c[1]',
                      'type': <ASTType.MEASURE: 40>},
                  {   'filenum': 0,
                      'linenum': 11,
                      'source': 'measure q[2] -> c[2];',
                      'source_reg': 'q[2]',
                      'target_reg': 'c[2]',
                      'type': <ASTType.MEASURE: 40>}],
    'g_sect': [   {   'filenum': 1,
                      'gate_name': 'u3(theta,phi,lambda)',
                      'gate_ops_list': [   {   'op': 'U',
                                               'op_param_list': [   'theta',
                                                                    'phi',
                                                                    'lambda'],
                                               'op_reg_list': ['q']}],
                      'gate_ops_raw_list': ['U(theta,phi,lambda) q;'],
                      'gate_param_list': ['q'],
                      'linenum': 6,
                      'source': 'gate u3(theta,phi,lambda) q { '
                                'U(theta,phi,lambda) q; }'},
                  {   'filenum': 1,
                      'gate_name': 'u2(phi,lambda)',
                      'gate_ops_list': [   {   'op': 'U',
                                               'op_param_list': [   'pi/2',
                                                                    'phi',
                                                                    'lambda'],
                                               'op_reg_list': ['q']}],
                      'gate_ops_raw_list': ['U(pi/2,phi,lambda) q;'],
                      'gate_param_list': ['q'],
                      'linenum': 8,
                      'source': 'gate u2(phi,lambda) q { U(pi/2,phi,lambda) q; '
                                '}'},
                  {   'filenum': 1,
                      'gate_name': 'u1(lambda)',
                      'gate_ops_list': [   {   'op': 'U',
                                               'op_param_list': [   '0',
                                                                    '0',
                                                                    'lambda'],
                                               'op_reg_list': ['q']}],
                      'gate_ops_raw_list': ['U(0,0,lambda) q;'],
                      'gate_param_list': ['q'],
                      'linenum': 10,
                      'source': 'gate u1(lambda) q { U(0,0,lambda) q; }'},
                  {   'filenum': 1,
                      'gate_name': 'cx',
                      'gate_ops_list': [   {   'op': 'CX',
                                               'op_param_list': None,
                                               'op_reg_list': ['c', 't']}],
                      'gate_ops_raw_list': ['CX c,t;'],
                      'gate_param_list': ['c', 't'],
                      'linenum': 12,
                      'source': 'gate cx c,t { CX c,t; }'},
                  {   'filenum': 1,
                      'gate_name': 'id',
                      'gate_ops_list': [   {   'op': 'U',
                                               'op_param_list': ['0', '0', '0'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['U(0,0,0) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 14,
                      'source': 'gate id a { U(0,0,0) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'u0(gamma)',
                      'gate_ops_list': [   {   'op': 'U',
                                               'op_param_list': ['0', '0', '0'],
                                               'op_reg_list': ['q']}],
                      'gate_ops_raw_list': ['U(0,0,0) q;'],
                      'gate_param_list': ['q'],
                      'linenum': 16,
                      'source': 'gate u0(gamma) q { U(0,0,0) q; }'},
                  {   'filenum': 1,
                      'gate_name': 'x',
                      'gate_ops_list': [   {   'op': 'u3',
                                               'op_param_list': [   'pi',
                                                                    '0',
                                                                    'pi'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u3(pi,0,pi) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 21,
                      'source': 'gate x a { u3(pi,0,pi) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'y',
                      'gate_ops_list': [   {   'op': 'u3',
                                               'op_param_list': [   'pi',
                                                                    'pi/2',
                                                                    'pi/2'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u3(pi,pi/2,pi/2) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 23,
                      'source': 'gate y a { u3(pi,pi/2,pi/2) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'z',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['pi'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u1(pi) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 25,
                      'source': 'gate z a { u1(pi) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'h',
                      'gate_ops_list': [   {   'op': 'u2',
                                               'op_param_list': ['0', 'pi'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u2(0,pi) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 27,
                      'source': 'gate h a { u2(0,pi) a; }'},
                  {   'filenum': 1,
                      'gate_name': 's',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['pi/2'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u1(pi/2) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 29,
                      'source': 'gate s a { u1(pi/2) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'sdg',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['-pi/2'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u1(-pi/2) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 31,
                      'source': 'gate sdg a { u1(-pi/2) a; }'},
                  {   'filenum': 1,
                      'gate_name': 't',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['pi/4'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u1(pi/4) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 33,
                      'source': 'gate t a { u1(pi/4) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'tdg',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['-pi/4'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u1(-pi/4) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 35,
                      'source': 'gate tdg a { u1(-pi/4) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'rx(theta)',
                      'gate_ops_list': [   {   'op': 'u3',
                                               'op_param_list': [   'theta',
                                                                    '-pi/2',
                                                                    'pi/2'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u3(theta,-pi/2,pi/2) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 39,
                      'source': 'gate rx(theta) a { u3(theta,-pi/2,pi/2) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'ry(theta)',
                      'gate_ops_list': [   {   'op': 'u3',
                                               'op_param_list': [   'theta',
                                                                    '0',
                                                                    '0'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u3(theta,0,0) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 41,
                      'source': 'gate ry(theta) a { u3(theta,0,0) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'rz(phi)',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['phi'],
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': ['u1(phi) a;'],
                      'gate_param_list': ['a'],
                      'linenum': 43,
                      'source': 'gate rz(phi) a { u1(phi) a; }'},
                  {   'filenum': 1,
                      'gate_name': 'cz',
                      'gate_ops_list': [   {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']}],
                      'gate_ops_raw_list': ['h b;', 'cx a,b;', 'h b;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 48,
                      'source': 'gate cz a,b { h b; cx a,b; h b; }'},
                  {   'filenum': 1,
                      'gate_name': 'cy',
                      'gate_ops_list': [   {   'op': 'sdg',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 's',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']}],
                      'gate_ops_raw_list': ['sdg b;', 'cx a,b;', 's b;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 50,
                      'source': 'gate cy a,b { sdg b; cx a,b; s b; }'},
                  {   'filenum': 1,
                      'gate_name': 'swap',
                      'gate_ops_list': [   {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['b', 'a']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']}],
                      'gate_ops_raw_list': ['cx a,b;', 'cx b,a;', 'cx a,b;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 52,
                      'source': 'gate swap a,b { cx a,b; cx b,a; cx a,b; }'},
                  {   'filenum': 1,
                      'gate_name': 'ch',
                      'gate_ops_list': [   {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'sdg',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 't',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 't',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 's',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'x',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 's',
                                               'op_param_list': None,
                                               'op_reg_list': ['a']}],
                      'gate_ops_raw_list': [   'h b;',
                                               'sdg b;',
                                               'cx a,b;',
                                               'h b;',
                                               't b;',
                                               'cx a,b;',
                                               't b;',
                                               'h b;',
                                               's b;',
                                               'x b;',
                                               's a;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 54,
                      'source': 'gate ch a,b { h b; sdg b; cx a,b; h b; t b; '
                                'cx a,b; t b; h b; s b; x b; s a; }'},
                  {   'filenum': 1,
                      'gate_name': 'ccx',
                      'gate_ops_list': [   {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['c']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['b', 'c']},
                                           {   'op': 'tdg',
                                               'op_param_list': None,
                                               'op_reg_list': ['c']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'c']},
                                           {   'op': 't',
                                               'op_param_list': None,
                                               'op_reg_list': ['c']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['b', 'c']},
                                           {   'op': 'tdg',
                                               'op_param_list': None,
                                               'op_reg_list': ['c']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'c']},
                                           {   'op': 't',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 't',
                                               'op_param_list': None,
                                               'op_reg_list': ['c']},
                                           {   'op': 'h',
                                               'op_param_list': None,
                                               'op_reg_list': ['c']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 't',
                                               'op_param_list': None,
                                               'op_reg_list': ['a']},
                                           {   'op': 'tdg',
                                               'op_param_list': None,
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']}],
                      'gate_ops_raw_list': [   'h c;',
                                               'cx b,c;',
                                               'tdg c;',
                                               'cx a,c;',
                                               't c;',
                                               'cx b,c;',
                                               'tdg c;',
                                               'cx a,c;',
                                               't b;',
                                               't c;',
                                               'h c;',
                                               'cx a,b;',
                                               't a;',
                                               'tdg b;',
                                               'cx a,b;'],
                      'gate_param_list': ['a', 'b', 'c'],
                      'linenum': 62,
                      'source': 'gate ccx a,b,c { h c; cx b,c; tdg c; cx a,c; '
                                't c; cx b,c; tdg c; cx a,c; t b; t c; h c; cx '
                                'a,b; t a; tdg b; cx a,b; }'},
                  {   'filenum': 1,
                      'gate_name': 'cswap',
                      'gate_ops_list': [   {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['c', 'b']},
                                           {   'op': 'ccx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b', 'c']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['c', 'b']}],
                      'gate_ops_raw_list': ['cx c,b;', 'ccx a,b,c;', 'cx c,b;'],
                      'gate_param_list': ['a', 'b', 'c'],
                      'linenum': 73,
                      'source': 'gate cswap a,b,c { cx c,b; ccx a,b,c; cx c,b; '
                                '}'},
                  {   'filenum': 1,
                      'gate_name': 'crz(lambda)',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['lambda/2'],
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'u1',
                                               'op_param_list': ['-lambda/2'],
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']}],
                      'gate_ops_raw_list': [   'u1(lambda/2) b;',
                                               'cx a,b;',
                                               'u1(-lambda/2) b;',
                                               'cx a,b;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 80,
                      'source': 'gate crz(lambda) a,b { u1(lambda/2) b; cx '
                                'a,b; u1(-lambda/2) b; cx a,b; }'},
                  {   'filenum': 1,
                      'gate_name': 'cu1(lambda)',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': ['lambda/2'],
                                               'op_reg_list': ['a']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'u1',
                                               'op_param_list': ['-lambda/2'],
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'u1',
                                               'op_param_list': ['lambda/2'],
                                               'op_reg_list': ['b']}],
                      'gate_ops_raw_list': [   'u1(lambda/2) a;',
                                               'cx a,b;',
                                               'u1(-lambda/2) b;',
                                               'cx a,b;',
                                               'u1(lambda/2) b;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 88,
                      'source': 'gate cu1(lambda) a,b { u1(lambda/2) a; cx '
                                'a,b; u1(-lambda/2) b; cx a,b; u1(lambda/2) b; '
                                '}'},
                  {   'filenum': 1,
                      'gate_name': 'cu3(theta,phi,lambda)',
                      'gate_ops_list': [   {   'op': 'u1',
                                               'op_param_list': [   'lambda-phi)/2'],
                                               'op_reg_list': ['t']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['c', 't']},
                                           {   'op': 'u3',
                                               'op_param_list': [   'phi+lambda)/2'],
                                               'op_reg_list': ['t']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['c', 't']},
                                           {   'op': 'u3',
                                               'op_param_list': [   'theta/2',
                                                                    'phi',
                                                                    '0'],
                                               'op_reg_list': ['t']}],
                      'gate_ops_raw_list': [   'u1((lambda-phi)/2) t;',
                                               'cx c,t;',
                                               'u3(-theta/2,0,-(phi+lambda)/2) '
                                               't;',
                                               'cx c,t;',
                                               'u3(theta/2,phi,0) t;'],
                      'gate_param_list': ['c', 't'],
                      'linenum': 97,
                      'source': 'gate cu3(theta,phi,lambda) c,t { // '
                                'implements controlled-U(theta,phi,lambda) '
                                'with  target t and control c '
                                'u1((lambda-phi)/2) t; cx c,t; '
                                'u3(-theta/2,0,-(phi+lambda)/2) t; cx c,t; '
                                'u3(theta/2,phi,0) t; }'},
                  {   'filenum': 1,
                      'gate_name': 'rzz(theta)',
                      'gate_ops_list': [   {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']},
                                           {   'op': 'u1',
                                               'op_param_list': ['theta'],
                                               'op_reg_list': ['b']},
                                           {   'op': 'cx',
                                               'op_param_list': None,
                                               'op_reg_list': ['a', 'b']}],
                      'gate_ops_raw_list': [   'cx a,b;',
                                               'u1(theta) b;',
                                               'cx a,b;'],
                      'gate_param_list': ['a', 'b'],
                      'linenum': 107,
                      'source': 'gate rzz(theta) a,b { cx a,b; u1(theta) b; cx '
                                'a,b; }'}],
    's_sect': [   {   'filenum': 0,
                      'source': [   '// yiqing (one of many possible)',
                                    'OPENQASM 2.0;',
                                    'include "qelib1.inc";',
                                    'qreg q[3];',
                                    'creg c[3];',
                                    'h q[0];',
                                    'h q[1];',
                                    'h q[2];',
                                    'barrier q[0],q[1],q[2];',
                                    'measure q[0] -> c[0];',
                                    'measure q[1] -> c[1];',
                                    'measure q[2] -> c[2];']},
                  {   'filenum': 1,
                      'source': [   '// Quantum Experience (QE) Standard '
                                    'Header',
                                    '// file: qelib1.inc',
                                    '',
                                    '// --- QE Hardware primitives ---',
                                    '',
                                    '// 3-parameter 2-pulse single qubit gate',
                                    'gate u3(theta,phi,lambda) q { '
                                    'U(theta,phi,lambda) q; }',
                                    '// 2-parameter 1-pulse single qubit gate',
                                    'gate u2(phi,lambda) q { '
                                    'U(pi/2,phi,lambda) q; }',
                                    '// 1-parameter 0-pulse single qubit gate',
                                    'gate u1(lambda) q { U(0,0,lambda) q; }',
                                    '// controlled-NOT',
                                    'gate cx c,t { CX c,t; }',
                                    '// idle gate (identity)',
                                    'gate id a { U(0,0,0) a; }',
                                    '// idle gate (identity) with length '
                                    'gamma*sqglen',
                                    'gate u0(gamma) q { U(0,0,0) q; }',
                                    '',
                                    '// --- QE Standard Gates ---',
                                    '',
                                    '// Pauli gate: bit-flip',
                                    'gate x a { u3(pi,0,pi) a; }',
                                    '// Pauli gate: bit and phase flip',
                                    'gate y a { u3(pi,pi/2,pi/2) a; }',
                                    '// Pauli gate: phase flip',
                                    'gate z a { u1(pi) a; }',
                                    '// Clifford gate: Hadamard',
                                    'gate h a { u2(0,pi) a; }',
                                    '// Clifford gate: sqrt(Z) phase gate',
                                    'gate s a { u1(pi/2) a; }',
                                    '// Clifford gate: conjugate of sqrt(Z)',
                                    'gate sdg a { u1(-pi/2) a; }',
                                    '// C3 gate: sqrt(S) phase gate',
                                    'gate t a { u1(pi/4) a; }',
                                    '// C3 gate: conjugate of sqrt(S)',
                                    'gate tdg a { u1(-pi/4) a; }',
                                    '',
                                    '// --- Standard rotations ---',
                                    '// Rotation around X-axis',
                                    'gate rx(theta) a { u3(theta, -pi/2,pi/2) '
                                    'a; }',
                                    '// rotation around Y-axis',
                                    'gate ry(theta) a { u3(theta,0,0) a; }',
                                    '// rotation around Z axis',
                                    'gate rz(phi) a { u1(phi) a; }',
                                    '',
                                    '// --- QE Standard User-Defined Gates  '
                                    '---',
                                    '',
                                    '// controlled-Phase',
                                    'gate cz a,b { h b; cx a,b; h b; }',
                                    '// controlled-Y',
                                    'gate cy a,b { sdg b; cx a,b; s b; }',
                                    '// swap',
                                    'gate swap a,b { cx a,b; cx b,a; cx a,b; }',
                                    '// controlled-H',
                                    'gate ch a,b {',
                                    'h b; sdg b;',
                                    'cx a,b;',
                                    'h b; t b;',
                                    'cx a,b;',
                                    't b; h b; s b; x b; s a;',
                                    '}',
                                    '// C3 gate: Toffoli',
                                    'gate ccx a,b,c',
                                    '{',
                                    'h c;',
                                    'cx b,c; tdg c;',
                                    'cx a,c; t c;',
                                    'cx b,c; tdg c;',
                                    'cx a,c; t b; t c; h c;',
                                    'cx a,b; t a; tdg b;',
                                    'cx a,b;',
                                    '}',
                                    '// cswap (Fredkin)',
                                    'gate cswap a,b,c',
                                    '{',
                                    'cx c,b;',
                                    'ccx a,b,c;',
                                    'cx c,b;',
                                    '}',
                                    '// controlled rz rotation',
                                    'gate crz(lambda) a,b',
                                    '{',
                                    'u1(lambda/2) b;',
                                    'cx a,b;',
                                    'u1(-lambda/2) b;',
                                    'cx a,b;',
                                    '}',
                                    '// controlled phase rotation',
                                    'gate cu1(lambda) a,b',
                                    '{',
                                    'u1(lambda/2) a;',
                                    'cx a,b;',
                                    'u1(-lambda/2) b;',
                                    'cx a,b;',
                                    'u1(lambda/2) b;',
                                    '}',
                                    '// controlled-U',
                                    'gate cu3(theta,phi,lambda) c, t',
                                    '{',
                                    '// implements '
                                    'controlled-U(theta,phi,lambda) with  '
                                    'target t and control c',
                                    'u1((lambda-phi)/2) t;',
                                    'cx c,t;',
                                    'u3(-theta/2,0,-(phi+lambda)/2) t;',
                                    'cx c,t;',
                                    'u3(theta/2,phi,0) t;',
                                    '}',
                                    '// two-qubit ZZ rotation',
                                    'gate rzz(theta) a,b',
                                    '{',
                                    'cx a,b;',
                                    'u1(theta) b;',
                                    'cx a,b;',
                                    '}']}],
    't_sect': {   'datetime_finish': '2019-02-24T13:31:34.521665',
                  'datetime_start': '2019-02-24T13:31:34.519560',
                  'filepaths': [   'yiqing.qasm',
                                   '/home/jax/work/QISKit/qiskit-terra/qiskit/qasm/libs/qelib1.inc'],
                  'name': 'main'}}

```
